.current_form
  = form_for [@staff, @management_task] do |f|
    -if @management_task.errors.any?
      #error_explanation
        %h2= "#{pluralize(@management_task.errors.count, "error")} prohibited this management_task from being saved:"
        %ul
          - @management_task.errors.full_messages.each do |msg|
            %li= msg

    .task_info
      = f.label :task_date
      = f.text_field :task_date, {:size =>10, :maxlength =>10, :class => "datepicker"}
      = f.label :comment
      = f.text_field :comment
    .task_info
      = f.label :task_type_code, "Task Type"
      = f.select :task_type_code, NcsCode.ncs_code_lookup(:management_task_type_code), {:prompt => 'Select Tasks'}, {:id => "task_type"}
      = f.label :task_type_other
      = f.text_field :task_type_other, {:size =>20 ,:id => "task_type_other"} 
    .task_expense
      %em Labor expenses:
      .other_data Your Rate: $#{@staff.hourly_rate}/hr
      = f.label :hours, "Hours spent"
      = f.text_field :hours, {:size =>4}
    .task_expense
      %em Other expenses (non-labor):
      .sub_expense
        = f.label :expenses, "Expense $"
        = f.text_field :expenses, {:size =>6}
      .sub_expense
        = f.label :miles, "Miles driven"
        = f.text_field :miles, {:size =>4}
    .task_actions
      = f.submit 'Save'
      = link_to 'Cancel', new_staff_management_task_path(params[:staff_id])
    
    :javascript
      $(".datepicker").datepicker();
      // For the 'other' task type field
      // Check on pageload
      $(document).ready(function(){
        wire_up_select_other("#task_type","#task_type_other");
      });

   
